


<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Crescent School - App</title>
<style>
:root{--green:#2f6b3d;--gold:#d4b85a;--bg:#f7faf3}
body{font-family:Inter,system-ui,Arial;margin:0;background:var(--bg);color:#103017}
header{background:linear-gradient(90deg,rgba(47,107,61,0.95),rgba(212,184,90,0.95));color:#fff;padding:18px 22px;display:flex;align-items:center;gap:14px}
header img{height:56px;border-radius:10px;border:3px solid rgba(255,255,255,0.18)}
.container{max-width:980px;margin:28px auto;padding:18px}
.card{background:#fff;border-radius:14px;box-shadow:0 6px 20px rgba(16,48,23,0.06);padding:18px;margin-bottom:18px}
nav{display:flex;gap:12px}
.nav-btn{padding:10px 14px;border-radius:10px;background:transparent;border:2px solid rgba(47,107,61,0.12);cursor:pointer}
.nav-btn.active{background:var(--green);color:#fff;border:none}
.mpin-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:72vh}
.mpin-input{font-size:20px;padding:12px;border-radius:10px;border:2px solid #e6e6e6;width:220px;text-align:center}
.big-title{font-size:20px;font-weight:700;margin-bottom:6px}
.updates-item{border-left:6px solid var(--gold);padding:12px;margin-bottom:10px;border-radius:8px}
.calendar-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.gallery-grid img{width:100%;height:120px;object-fit:cover;border-radius:8px}
footer{padding:12px;text-align:center;color:#5a6c58}
@media(max-width:600px){.gallery-grid{grid-template-columns:repeat(2,1fr)}header img{height:46px}}
</style>
</head>
<body>
<header>
<img src="logo.png" alt="logo" id="logoImg">
<div>
<div style="font-weight:800;font-size:18px">Crescent School</div>
<div style="font-size:13px;opacity:.9">Official Student App</div>
</div>
</header>


<div class="container">
<div id="mpinScreen" class="card mpin-screen">
<div class="big-title">Enter MPIN to continue</div>
<input id="mpinInput" class="mpin-input" type="password" placeholder="MPIN">
<div style="margin-top:14px">
<button id="mpinBtn" class="nav-btn">Unlock</button>
</div>
<div style="margin-top:12px;color:#6b6b6b;font-size:13px">Use MPIN: <strong>123456</strong></div>
</div>


<div id="appScreen" style="display:none">
<div class="card" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
<div>
<div style="font-weight:800;font-size:22px">Welcome to Crescent School</div>
<div style="opacity:.85;margin-top:4px">See updates, calendar events and the gallery below.</div>
</div>
</html>
  
<!doctype html/>


  <html lang="en">
<h3>Admin Actions</h3>
<button id="clearSession" class="btn" style="background:#555">Clear MPIN sessions</button>
<div class="small" style="margin-top:8px">Note: This admin page is a simple admin UI. For stronger security, integrate Firebase Authentication and protect this page server-side.</div>
</div>


</div>


<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
<script>
var firebaseConfig = {
apiKey: "AIzaSyBBIG7IpuY8Hc3E0_zcEyon06an8ll6TGw",
authDomain: "school-test-4b350.firebaseapp.com",
projectId: "school-test-4b350",
storageBucket: "school-test-4b350.firebasestorage.app",
messagingSenderId: "557567714700",
appId: "1:557567714700:web:be0df02162246ee5d5a2a9"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();


// Add update
document.getElementById('addUpdate').addEventListener('click',async ()=>{
const t = document.getElementById('updTitle').value.trim();
const b = document.getElementById('updBody').value.trim();
if(!t || !b) return document.getElementById('updMsg').innerText='Please fill title and body.';
document.getElementById('updMsg').innerText='Publishing...';
try{
await db.collection('updates').add({title:t,body:b,createdAt:firebase.firestore.FieldValue.serverTimestamp()});
document.getElementById('updMsg').innerText='Published.';
document.getElementById('updTitle').value='';document.getElementById('updBody').value='';
}catch(e){document.getElementById('updMsg').innerText='Error: '+e.message}
});


// Add event
document.getElementById('addEvent').addEventListener('click',async ()=>{
const t = document.getElementById('evTitle').value.trim();
const d = document.getElementById('evDate').value;
const n = document.getElementById('evNote').value.trim();
if(!t || !d) return document.getElementById('evMsg').innerText='Please add title and date.';
document.getElementById('evMsg').innerText='Adding...';
try{
const dateObj = new Date(d+'T00:00:00');
await db.collection('events').add({title:t,date:firebase.firestore.Timestamp.fromDate(dateObj),note:n,createdAt:firebase.firestore.FieldValue.serverTimestamp()});
document.getElementById('evMsg').innerText='Event added.';
document.getElementById('evTitle').value='';document.getElementById('evDate').value='';document.getElementById('evNote').value='';
}catch(e){document.getElementById('evMsg').innerText='Error: '+e.message}
});


// Upload photo
document.getElementById('uploadPhoto').addEventListener('click',async ()=>{
const fileIn = document.getElementById('photoFile');
const caption = document.getElementById('photoCaption').value.trim();
if(!fileIn.files.length) return document.getElementById('photoMsg').innerText='Choose a photo first.';
const file = fileIn.files[0];
const id = Date.now() + '_' + file.name.replace(/\s/g,'_');
document.getElementById('photoMsg').innerText='Uploading...';
try{
const ref = storage.ref('gallery/'+id);
await ref.put(file);
const url = await ref.getDownloadURL();
await db.collection('gallery').add({name:caption || file.name,url:url,createdAt:firebase.firestore.FieldValue.serverTimestamp()});
document.getElementById('photoMsg').innerText='Uploaded.';
document.getElementById('photoFile').value='';document.getElementById('photoCaption').value='';
}catch(e){document.getElementById('photoMsg').innerText='Error: '+e.message}
});


document.getElementById('clearSession').addEventListener('click',()=>{
// Clear unlocked MPIN from all tabs (only affects sessionStorage on this browser)
sessionStorage.removeItem('mpinUnlocked');
alert('Cleared session. Students will need MPIN again.');
});
</script>
</body>
</html>
<!-- end admin.html -->




